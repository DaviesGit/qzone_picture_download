!function(){"use strict";var i,l,a,c,u=0,s=[],d=[];c=prompt("Please enter checker wait interval! (ms)"),c=isNaN(c)||""===c?5e3:+c;var f=function(e){return e=e.replace(/&t=\d+/,"")},h=function(e,n,t){t||(t=100),e()?n():setTimeout(function(){h(e,n,t)},t)},r=function(){var e,n,t,o;confirm("Whether download fileArray!")&&(e=slide.photos[0].ownerName+"("+slide.photos[0].ownerUin+")_fileArray.json",n=JSON.stringify(d),t=new Blob([n],{type:"text/plain"}),(o=window.document.createElement("a")).href=window.URL.createObjectURL(t),o.download=e,o.click()),confirm("Whether download all picture!\ntotal items:"+d.length)&&function(e){var n=prompt("Please enter file download interval! (ms)");n=isNaN(n)||""===n?2e3:+n;for(var t=0;t<e.length;++t){var o=e[t];setTimeout(function(o){return function(){var e,n,t;e=o.fileName,n=o.url,(t=window.document.createElement("a")).href=n,t.download=e,t.click()}}(o),n*t)}}(d)};"0"===jQuery("#QM_Profile_Photo_Cnt").text()&&alert("this QZone not have photo!");var e=jQuery("#QM_Profile_Photo_A")[0];if(e)e.click();else if(!confirm("Not find photo button! whether continune?"))return;h(function(){var e=document.getElementById("tphoto");return!!e&&(i=e.contentWindow||e,l=i.document,!!(a=jQuery(".js-album-list-ul>li",l)).length)},function(){var o=function(){if(u>=a.length){window.fileArray=d;var e=jQuery(".top-nav>.nav-list:last>div>a").unbind("click");return e.html("Download"),void e.click(r)}var n=a[u],t=jQuery(".js-cover-img",n);if(-1!=t.attr("onload").indexOf("http://qzonestyle.gtimg.cn/aoi/img/photo/logic/pwd.png")||-1!=t.attr("onload").indexOf("http://qzonestyle.gtimg.cn/aoi/img/photo/logic/pic-none.png"))return++u,void o();t.click(),h(function(){if(l=i.document,!jQuery(".list.j-pl-photolist-ul",l).length){var e=jQuery("#js-viewer-container");return!(!e||!e.length)&&"none"!=e.css("display")}return!0},function(){var r,e;l=i.document,r=function(){l=i.document,++u,jQuery(".c-tx2.js-select",l)[0].click(),a=null,h(function(){return l=i.document,!!(a=jQuery(".js-album-list-ul>li",l)).length},function(){o()},c)},e=setInterval(function(){var e=Math.floor(10*Math.random());i.document.getElementsByClassName("j-pl-photoitem-imgctn")[e].click()},c),h(function(){var e=jQuery("#js-viewer-container");return!(!e||!e.length)&&"none"!=e.css("display")},function(){clearInterval(e);var i=setInterval(function(){jQuery("#js-thumb-next>a")[0].click()},c);h(function(){if(!window.slide||!slide.picTotal||!slide.photos)return!1;for(var e=0;e<slide.photos.length;++e){for(var n=!0,t=0;t<s.length;++t)if(s[t].picKey===slide.photos[e].picKey){n=!1;break}n&&s.push(slide.photos[e])}return s.length===slide.picTotal},function(){clearInterval(i),jQuery(".photo_layer_close>a").click();for(var e=0;e<s.length;++e)n=s[e],o=t=void 0,o=(o=n.ownerName.replace(/_/gi,"-")+"_"+n.topicName.replace(/_/gi,"-")+"_"+n.name.replace(/_/gi,"-")+"_"+n.picKey.replace(/_/gi,"-")).replace(/\./gi,"&#046"),1===n.raw_upload?(t=o+"_raw",d.push({fileName:t,url:f(n.raw)})):n.origin?(t=o+"_origin",d.push({fileName:t,url:f(n.origin)})):n.downloadUrl?(t=o+"_downloadUrl",d.push({fileName:t,url:f(n.downloadUrl)})):(t=o+"_url",d.push({fileName:t,url:f(n.url)}));var n,t,o;s=[],r()},c)},c)},c)};o()},c)}();